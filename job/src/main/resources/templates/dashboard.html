<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard</title>

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    :root {
      --primary: #3498db;
      --primary-light: #5dade2;
      --primary-dark: #2c80b9;
      --secondary: #2c3e50;
      --success: #2ecc71;
      --warning: #f39c12;
      --danger: #e74c3c;
      --light-bg: #f8f9fa;
    }

    body {
      background: #f5f7fa;
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
    }

    .navbar {
      background: linear-gradient(135deg, var(--secondary) 0%, #1a2530 100%);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .navbar-brand span {
      color: var(--primary-light);
    }

    .nav-link {
      transition: all 0.2s ease;
      border-radius: 8px;
      position: relative;
      font-weight: 500;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-1px);
    }

    .nav-link.active {
      background: rgba(52, 152, 219, 0.15);
      color: white;
    }

    .welcome-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(52, 152, 219, 0.3);
      overflow: hidden;
      position: relative;
    }

    .welcome-header::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      transform: rotate(15deg);
    }

    .section-title {
      position: relative;
      font-weight: 600;
      padding-bottom: 0.5rem;
    }

    .section-title::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      height: 4px;
      width: 40px;
      background: linear-gradient(to right, var(--primary), var(--primary-light));
      border-radius: 4px;
    }

    .card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: all 0.5s ease;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    .btn-primary:hover {
      box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
      transform: translateY(-3px);
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success) 0%, #27ae60 100%);
      color: white;
      box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
    }

    .btn-success:hover {
      box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
      transform: translateY(-3px);
    }

    .btn-warning {
      background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);
      color: white;
      box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
    }

    .btn-warning:hover {
      box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
      transform: translateY(-3px);
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger) 0%, #c0392b 100%);
      color: white;
      box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
    }

    .btn-danger:hover {
      box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
      transform: translateY(-3px);
    }

    .feature-card {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .feature-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .dropdown-menu {
      animation: fadeIn 0.2s ease-out;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border-radius: 12px;
      border: none;
      padding: 0.5rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
    }

    .feature-icon {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .gradient-text {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  </style>
</head>

<body class="bg-gray-50">
<!-- Navbar -->
<nav class="navbar py-3 px-4 md:px-8">
  <div class="container mx-auto">
    <div class="flex justify-between items-center">
      <!-- Brand -->
      <a class="navbar-brand text-xl font-bold text-white" href="/dashboard">
        <i class="fas fa-briefcase mr-2"></i> Job<span>Portal</span>
      </a>

      <!-- Mobile Toggle -->
      <button class="md:hidden focus:outline-none text-white" id="mobile-menu-button">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>

      <!-- Nav Items -->
      <div class="hidden md:flex md:items-center md:justify-between w-full md:w-auto" id="navbar-menu">
        <ul class="md:flex md:space-x-2 md:mr-4">
          <li>
            <a class="nav-link block px-4 py-2 text-white active" href="/dashboard">
              <i class="fas fa-home mr-2"></i> Home
            </a>
          </li>
          <li>
            <a class="nav-link block px-4 py-2 text-white" th:href="@{/jobs/list}">
              <i class="fas fa-search mr-2"></i> Jobs
            </a>
          </li>
          <li>
            <a class="nav-link block px-4 py-2 text-white" th:href="@{/applications/my-applications}">
              <i class="fas fa-paper-plane mr-2"></i> Applications
            </a>
          </li>
        </ul>

        <!-- User Dropdown -->
        <div class="relative ml-4" th:if="${#authorization.expression('isAuthenticated()')}">
          <button class="flex items-center space-x-2 focus:outline-none" id="user-menu-button">
            <div class="user-avatar">
              <span th:text="${#authentication.principal.username.substring(0, 1).toUpperCase()}">U</span>
            </div>
            <span class="text-white font-medium" th:text="${#authentication.principal.username}">User</span>
            <i class="fas fa-chevron-down text-xs text-white"></i>
          </button>

          <div class="hidden absolute right-0 z-10 mt-3 w-48 origin-top-right rounded-xl bg-white py-2 shadow-lg dropdown-menu" role="menu" aria-orientation="vertical" tabindex="-1">
            <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600" th:href="@{/profile}" role="menuitem" tabindex="-1">
              <i class="fas fa-user mr-2"></i> Profile
            </a>
            <div class="border-t my-1 border-gray-100"></div>
            <form th:action="@{/logout}" method="post">
              <button type="submit" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem" tabindex="-1">
                <i class="fas fa-sign-out-alt mr-2"></i> Logout
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<div class="container mx-auto px-4 py-8">
  <!-- Welcome Header -->
  <div class="welcome-header p-8 mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between relative z-10">
      <div class="md:w-2/3">
        <h1 class="text-3xl md:text-4xl font-bold mb-2">Welcome back ðŸ‘‹</h1>
        <h4 class="text-xl font-semibold text-blue-100 mb-4" th:text="${userEmail}">user@example.com</h4>
        <p class="text-lg text-blue-100 opacity-90">Access all the tools you need for your job search in one place.</p>
      </div>
      <div class="mt-6 md:mt-0">
        <div class="bg-white bg-opacity-20 inline-flex items-center justify-center p-4 rounded-2xl">
          <i class="fas fa-rocket text-3xl text-white"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Features Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <!-- Job Search Feature -->
    <div class="feature-card">
      <div class="feature-icon">
        <i class="fas fa-search"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">Find Jobs</h3>
      <p class="text-gray-600 mb-4">Browse thousands of job opportunities from top companies and startups.</p>
      <a th:href="@{/jobs/list}" class="btn btn-primary mt-auto">
        <i class="fas fa-search mr-2"></i> Explore Jobs
      </a>
    </div>

    <!-- Applications Feature -->
    <div class="feature-card">
      <div class="feature-icon" style="background: linear-gradient(135deg, var(--success) 0%, #27ae60 100%);">
        <i class="fas fa-file-alt"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">Your Applications</h3>
      <p class="text-gray-600 mb-4">Track the status of all your job applications in one convenient place.</p>
      <a th:href="@{/applications/my-applications}" class="btn btn-success mt-auto">
        <i class="fas fa-eye mr-2"></i> View Applications
      </a>
    </div>

    <!-- Profile Feature -->
    <div class="feature-card">
      <div class="feature-icon" style="background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);">
        <i class="fas fa-user-edit"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">Your Profile</h3>
      <p class="text-gray-600 mb-4">Keep your profile updated to attract the best opportunities.</p>
      <a th:href="@{/profile}" class="btn btn-warning mt-auto">
        <i class="fas fa-edit mr-2"></i> Edit Profile
      </a>
    </div>

    <!-- Resume Builder Feature -->
    <div class="feature-card">
      <div class="feature-icon" style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);">
        <i class="fas fa-file-pdf"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">Resume Builder</h3>
      <p class="text-gray-600 mb-4">Create a professional resume that stands out to employers.</p>
      <a th:href="@{/resume}" class="btn mt-auto" style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); color: white;">
        <i class="fas fa-plus-circle mr-2"></i> Build Resume
      </a>
    </div>
  </div> <!-- Closing the features grid -->

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
    <!-- Role Specific Options -->
    <!-- Employer Options -->
    <div th:if="${isEmployer}" class="card p-6">
      <h2 class="section-title text-2xl font-semibold text-gray-800 mb-4">Employer Tools</h2>
      <p class="text-gray-600 mb-6">Manage your job postings and track applications</p>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <a th:href="@{/jobs/post}" class="btn btn-primary">
          <i class="fas fa-plus-circle mr-2"></i> Post a Job
        </a>
        <a th:href="@{/jobs/my-jobs}" class="btn btn-success">
          <i class="fas fa-tasks mr-2"></i> Manage Jobs
        </a>
      </div>
    </div> <!-- Closing employer options -->

    <!-- Applicant Options -->
    <div th:if="${isApplicant}" class="card p-6">
      <h2 class="section-title text-2xl font-semibold text-gray-800 mb-4">Application Tools</h2>
      <p class="text-gray-600 mb-6">Manage your applications and profile to land your dream job</p>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <a th:href="@{/applications/my-applications}" class="btn btn-primary">
          <i class="fas fa-file-alt mr-2"></i> My Applications
        </a>
        <a th:href="@{/profile}" class="btn btn-success">
          <i class="fas fa-user-edit mr-2"></i> Edit Profile
        </a>
      </div>

      <div class="mt-6 pt-4 border-t border-gray-100">
        <h3 class="font-medium text-gray-700 mb-3">Quick Actions</h3>
        <div class="grid grid-cols-2 gap-4">
          <a th:href="@{/jobs/list?filter=recent}" class="bg-blue-50 p-3 rounded-lg hover:bg-blue-100 transition">
            <p class="font-medium text-blue-700">New Jobs</p>
            <p class="text-sm text-blue-600">Posted recently</p>
          </a>
          <a th:href="@{/jobs/list?filter=featured}" class="bg-green-50 p-3 rounded-lg hover:bg-green-100 transition">
            <p class="font-medium text-green-700">Featured</p>
            <p class="text-sm text-green-600">Top companies</p>
          </a>
        </div>
      </div>
    </div> <!-- Closing applicant options -->

    <!-- Platform Updates -->
    <div class="card p-6">
      <h2 class="section-title text-2xl font-semibold text-gray-800 mb-4">Latest Updates</h2>
      <p class="text-gray-600 mb-6">New features and improvements to enhance your experience</p>

      <div class="space-y-4">
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-4 flex-shrink-0">
            <i class="fas fa-bell"></i>
          </div>
          <div>
            <h3 class="font-semibold text-gray-800">Smart Job Matching</h3>
            <p class="text-sm text-gray-600">Our algorithm now provides better job recommendations based on your profile.</p>
          </div>
        </div>

        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600 mr-4 flex-shrink-0">
            <i class="fas fa-check-circle"></i>
          </div>
          <div>
            <h3 class="font-semibold text-gray-800">Application Tracking</h3>
            <p class="text-sm text-gray-600">Now with enhanced status tracking for all your job applications.</p>
          </div>
        </div>
      </div>
    </div> <!-- Closing platform updates -->
  </div> <!-- Closing the grid -->

  <!-- Logout Section -->
  <div class="card p-6 text-center">
    <h2 class="section-title text-2xl font-semibold text-gray-800 mb-3 inline-block">Ready to leave?</h2>
    <p class="text-gray-600 mb-6">Make sure to save your work before logging out.</p>
    <form th:action="@{/logout}" method="post">
      <button type="submit" class="btn btn-danger">
        <i class="fas fa-sign-out-alt mr-2"></i> Logout
      </button>
    </form>
  </div>
</div>

<script>
  // Mobile menu toggle
  document.getElementById('mobile-menu-button').addEventListener('click', function() {
    const menu = document.getElementById('navbar-menu');
    menu.classList.toggle('hidden');
    menu.classList.toggle('block');
  });

  // User dropdown toggle
  const userMenuButton = document.getElementById('user-menu-button');
  if (userMenuButton) {
    const dropdownMenu = userMenuButton.nextElementSibling;

    userMenuButton.addEventListener('click', function(e) {
      e.stopPropagation();
      dropdownMenu.classList.toggle('hidden');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
      if (!userMenuButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
        dropdownMenu.classList.add('hidden');
      }
    });
  }
</script>
</body>
</html>