<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>My Applications for Job</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<div th:replace="Navheader :: Navbar"></div>
<h1>Applications for <span th:text="${job.title}"></span></h1>   //view Applications
<table class="table">
  <thead>
  <tr>
    <th>Applicant Name</th>
    <th>Email</th>
    <th>Status</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="application : ${applications}">
    <td th:text="${application.user.name}">Applicant Name</td>
    <td th:text="${application.user.email}">Email</td>
    <td>
      <form th:action="@{/applications/update-status/{appId}(appId=${application.id})}" method="post">
        <select name="status" class="form-select form-select-sm">
          <option th:each="status : ${T(com.jobpotal.job.entity.ApplicationStatus).values()}"
                  th:value="${status}"
                  th:text="${status}"
                  th:selected="${status == application.status}">
          </option>
        </select>
        <input type="hidden" name="jobId" th:value="${job.id}" />
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit" class="btn btn-sm btn-success mt-1">Update</button>
      </form>
    </td>
  </tr>
  </tbody>
</table>

<a href="/jobs/my-jobs">Back to My Jobs</a>
</body>
</html>